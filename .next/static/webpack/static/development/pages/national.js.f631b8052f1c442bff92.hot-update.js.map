{"version":3,"file":"static/webpack/static/development/pages/national.js.f631b8052f1c442bff92.hot-update.js","sources":["webpack:///./pages/national.js"],"sourcesContent":["import Head from '../components/head'\nimport axios from 'axios'\nimport GoingChart from '../components/going-chart'\nimport DiffTable from '../components/diff-table';\nimport MonthChart from '../components/month-chart';\nimport Menu from '../components/menu';\nimport Select from 'react-select';\nimport NProgress from 'nprogress'\n\n\nexport default class National extends React.Component {\n  topYear = [\n    {value: 2014, label: '2014'},\n    {value: 2015, label: '2015'},\n    {value: 2016, label: '2016'}\n  ]\n  topCountries = [\n    // this.props.tops.topCountry\n  ]\n\n  constructor(props) {\n    super(props);\n    this.handleYearChange = this.handleYearChange.bind(this);\n    this.state = {\n      selectedYear: {value: 2016, label: '2016'},\n      data: props.data\n    }\n  }\n\n  static async getInitialProps() {\n    const response = await axios.get('http://localhost:3000/BM/national/2016/?countries=Belgium,France');\n    const tops = await axios.get('http://localhost:3000/BM/national/2016/top')\n    return {\n      data: response.data,\n      tops: tops.data\n    }\n  }\n\n  axiosProgress = (url) => {\n    NProgress.start();\n    return axios.get(url)\n      .then(res => {\n        NProgress.done();\n        return res;\n      })  \n  }\n\n  handleYearChange = async (selectedYear) => {\n     const res = await this.axiosProgress('http://localhost:3000/BM/national/'+selectedYear.value+'/?countries=Belgium,France')\n     this.setState({data: res.data, selectedYear});\n  }\n  \n  \n  handleSubmit(event) {\n    event.preventDefault();\n  }\n\n  render() {\n    console.log(this.props);\n    const { selectedYear } = this.state;\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <div className=\"position-fixed\" >\n            <Menu>\n              <form onSubmit={this.handleSubmit.bind(this)}>\n                <h1>Menu</h1>\n                <div className=\"form-group row\">\n                  <div className=\"col-md-10\">\n                    <Select value={selectedYear} onChange={this.handleYearChange} options={this.topYear}/>\n                  </div>\n                </div>\n                  <Select\n                    // defaultValue={[colourOptions[2], colourOptions[3]]}\n                    isMulti\n                    name=\"colors\"\n                    options={this.topCountries}\n                    className=\"basic-multi-select\"\n                    classNamePrefix=\"select\"\n                  />\n                <button type=\"submit\" class=\"btn btn-primary\">Update</button>\n              </form>\n            </Menu>\n          </div>\n        </div>\n        <div className=\"col-md-10\" style={{ borderLeft: '1px #e9ecef solid' }}>\n          <Head title=\"National\" />\n          <h1>National</h1>\n          <GoingChart evolution={this.state.data['Evolution']} year={this.state.selectedYear['value']} />\n\n          <DiffTable evolution={this.state.data['Evolution']} year={this.state.selectedYear['value']} var='Ingoing' />\n          <DiffTable evolution={this.state.data['Evolution']} year={this.state.selectedYear['value']} var='Outgoing' />\n\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <MonthChart evolution={this.state.data['Monthly']} var='Ingoing' />\n            </div>\n            <div className=\"col-md-6\">\n              <MonthChart evolution={this.state.data['Monthly']} var='Outgoing' />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;AAUA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AARA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAKA;AAJA;AACA;AAGA;AAmBA;AACA;AAEA;AACA;AACA;AACA;AACA;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA5BA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAHA;AAOA;AACA;;;AAyBA;AACA;AACA;;;AAEA;AACA;AADA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAEA;AACA;AACA;AACA;AACA;AANA;AAQA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAMA;;;;;;;;;;;;;AA1EA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AACA;AACA;AAFA;AACA;;;;;;;;;;;;;;;;;;AAvBA;AACA;;;;;A","sourceRoot":""}